# SENTRY - Инструмент мониторинга ошибок.


## Сильные стороны
1) Просто подключить. Интеграция с django происходит с помощью добавления нескольких строк в settings.py.
2) Большое кол-во отладочной информации, которая позволяет исправить самые сложные баги.
3) Гибкая система Email оповещений.
4) Удобный флоу(flow) для отслеживания регрессий ошибок.
5) Мониторинг ошибок на фронте.
6) Статистика ошибок (по версии браузера, операционной системе, url и т.д.)


## Предметный указатель
Участник(member) - Человек, который имеет доступ к sentry. У пользователей есть роль.
Роль(role) - Набор ограничений, который предоставляет только необходимую информацию пользователю. Различаюся 4 вида ролей (manager, admin, member, owner).
Команда(team) - Сущность позволяющая связать мно-во участников с мно-вом проектов.
Проект(project) - Приложение, отправляющее данные во время ошибки.
Проблемы(issue) - Событие, возникающее при в исключительном случае.

Sentry может работать с большим кол-вом проектов. Для удобства работы с большим кол-во проектов, используются команды. К командам прикрепляются проекты. Также в команды входят участники. У каждого участника может быть несолько проектов. Все это позволяет гибко настраивать систему оповещений и отображения ошибок.

## Описание страниц sentry
- Project - страница создания и администрирования проектов.
- Issues - основная страница со списком проблем.
- Performance - страница агригирования транзакций и графиков задержек транзакций.
- Release - страница релизов.
- User Feedback - виджет, который предоставления возможности собирать доп.инфу о проблемах с помощью отзывов пользователей.
- Alerts - настройка событий оповещений.
- Discover - обеспечивает видимость ваших данных в разных средах, опираясь на данные об ошибках и обогащая их.
- Dashboards - построение дашбордов.
- Activity - произошедшие собития по проблемам.
- Stats. Статистика

Issue имеет функционал сортировки и множественных действий над проблемами. В верхней части находится панель сортировки проблем по большому кол-во параметров: проект, окружение, дата, статус проблемы (https://i.imgur.com/5EQpDRq.png). Стоит отметить удобную строку поиска. 
В нижней части находится список проблем и функционал множетвенных действий. Функционал множественных действий (https://i.imgur.com/P1jRJ4R.png) позволяет переводить проблему в следующие статусы:
1) resolve - проблема решена, при следующем возникновении этой проблемы формируется письмо разработчику. Этот функционал позволяет отслеживать регресс проблем.
2) ignore - игнорировать проблему. Таким статусом отмечаются несущественные проблемы.
3) mark reviewed - пометить как просмотренная.
4) merge - объединение проблем.
5) bookmark - выделить проблему.
6) delete - удалить проблему.
Для уменьшения захломления проблем, есть функция autoresolve. В настройках проекта можно выставить период, после окончания которого все проблемы будут иметь статус resolve.

Детальная страница Issues - Детальная страница описания проблемы.

Детальная страница содержит тайтл и описание ошибки, место в коде где произошла ошибка, значения переменных, стектрейс, теги, контексты и хлебные крошки ошибки (https://i.imgur.com/diVh4TE.png).
Чтобы sentry показывал значение переменных, нужно писать код в определенном стиле, выделяя новые переменны для отслеживаемого значения. Этот подход так-же делает код более читаемым. В данном примере (https://i.imgur.com/xetpzzm.png) видно что вынессеное значение переменой finaly_result отображается в списке переменных под кодом. Если бы мы все решили в одной строке мы бы не увидели значение переменной на детальной странице проблемы.
Дополнительный контекст, это еще один механизм добавления нужной информации на детальную страницу проблемы. Добавляя следующий код (https://i.imgur.com/Bo60evf.png) в нужное место в коде можно вывести информацию на детальную страницу проблемы (https://i.imgur.com/rS0xSAy.png)
Хлебные крошки так-же позволяют вывести дополнительную информацию по ходу течения кода. На этих участках кода (https://i.imgur.com/1TORZSo.png) поэтапно добавляется отладочная информация. В sentry это выглядит следующим образом (https://i.imgur.com/XfZldKs.png). 
Транзакции используются для группировки проблем. Добавляя свою транзакцию, можно выделить процент проблем с этой транзакцией. В коде это выглядет следующем образом (https://i.imgur.com/mg1kfAr.png).
Теги - пары строк ключ/значение, которые индексируются и доступны для поиска. Пример кода (https://i.imgur.com/YCK32E7.png). Пример поиска по тегу (https://i.imgur.com/qJRc6lP.png)


Release. Этот интересный функционал мне не удалось попробовать. Из документации следует что это механизм уведомления sentry определенной версии кода, который позволяет легко определить новые проблемы и регресии релиза.


## Полезные ссылки
1) Инструкция по развороту self-host (https://github.com/getsentry/self-hosted)








